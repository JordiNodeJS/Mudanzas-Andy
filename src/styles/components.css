@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* Reusable card base: rounded, shadow, padding and hover lift */
  .card {
    @apply rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300 transform hover:scale-105;
  }

  /* Slightly smaller card padding variant */
  .card-compact {
    @apply p-4;
  }

  /* Small wrapper for hover/animation used by many buttons */
  .btn-animated {
    @apply font-bold rounded-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center;
  }

  /* Primary brand button (yellow + text color) */
  .btn-primary {
    background-color: rgb(var(--color-highlight));
    color: rgb(var(--color-primary));
    border-radius: 9999px; /* rounded-full */
    font-weight: 700;
    padding: 0.5rem 1rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    transition: background-color 200ms ease, transform 200ms ease;
  }
  .btn-primary:hover {
    background-color: rgba(var(--color-highlight), 0.92);
  }

  /* Bordered card helper (keeps border utilities centralized) */
  .card-bordered {
    @apply border;
  }

  /* Posicionamiento específico para la imagen del camión en móvil */
  .mobile-truck-position {
    /* Variables controlables:
       - --truck-pos-x: mueve horizontalmente (0% = izquierda, 50% = centro, 100% = derecha)
       - --truck-pos-y-mobile: mueve verticalmente en móvil (0% = arriba, 100% = abajo)
       - --truck-clip-bottom-mobile: cuánto recortar desde la parte inferior en móvil (porcentaje)
    */
    --truck-pos-x: 50%;
    --truck-pos-y-mobile: 95%;
    --truck-clip-bottom-mobile: 15%;

    /* Aplicación de variables */
    object-position: var(--truck-pos-x) var(--truck-pos-y-mobile);
    clip-path: inset(0% 0% var(--truck-clip-bottom-mobile) 0%);
  }

  /* En pantallas más grandes, usar variables específicas de desktop */
  @media (min-width: 768px) {
    .mobile-truck-position {
      /* Valores por defecto para desktop: ajústalos si necesitas mover la imagen o cambiar el recorte */
      --truck-pos-y-desktop: 65%;
      --truck-clip-bottom-desktop: 5%;

      object-position: var(--truck-pos-x) var(--truck-pos-y-desktop);
      clip-path: inset(0% 0% var(--truck-clip-bottom-desktop) 0%);
    }
  }

  /* Team card: enforce consistent proportions (image area on top, content below) */
  .team-card {
    display: flex;
    flex-direction: column;
    height: 100%; /* relies on parent (.items-stretch + h-full) */
    background-clip: padding-box; /* keep rounded corners clean when media overflows */
  }

  .team-card__media {
    /* Fixed height for consistent proportions */
    height: 200px;
    overflow: hidden;
    flex: 0 0 auto;
  }

  @media (min-width: 1024px) {
    .team-card__media {
      height: 220px;
    }
  }

  .team-card__body {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    justify-content: flex-start; /* start from top, no centering */
    padding: 1rem 1.5rem 1.5rem 1.5rem; /* top, right, bottom, left */
    gap: 0.5rem; /* consistent spacing between title and description */
  }

  @media (min-width: 768px) {
    .team-card-2 .mobile-truck-position {
      --truck-pos-y-desktop: 65%; /* más abajo para reducir cielo */
      --truck-clip-bottom-desktop: 5%;
    }
  }

  /* Filtros estilo fondo/overlay para las imágenes del equipo profesional */
  /* Las imágenes se tratan como fondos: tinte sutil + desaturado, al hover se aclaran. */
  .team-card__media {
    position: relative;
    overflow: hidden; /* asegurar recorte del pseudo-elemento */
  }

  .team-image-filter {
    /* Estado base: aspecto de fondo con tinte sutil y ligera desaturación */
    filter: grayscale(30%) brightness(0.72) contrast(0.95) saturate(0.9);
    transform-origin: center center;
    transition: filter 0.35s ease, transform 0.35s ease, opacity 0.35s ease;
    will-change: filter, transform, opacity;
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Pseudo-overlay que actúa como fondo de la imagen (estilo tarjetas) */
  .team-card__media::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    /* Gradiente base que mezcla con la paleta del sitio */
    background: linear-gradient(
      135deg,
      rgba(var(--color-accent), 0.12) 0%,
      rgba(var(--color-neutral), 0.08) 45%,
      rgba(var(--color-primary), 0.08) 100%
    );
    mix-blend-mode: multiply; /* se comporta como fondo sobre la imagen */
    opacity: 0.9;
    transition: opacity 0.35s ease, background 0.35s ease;
    z-index: 1;
  }

  /* Al hover aclaramos la imagen y reducimos el overlay para 'revelarla' */
  .team-card:hover .team-image-filter {
    filter: grayscale(0%) brightness(1.03) contrast(1.06) saturate(1.05);
    transform: scale(1.02);
  }

  .team-card:hover .team-card__media::after {
    opacity: 0.25; /* deja ver la imagen más limpia */
  }

  /* Variantes por tarjeta usando gradientes puntuales (coinciden con ServicesSection) */
  .team-card--variant-primary .team-card__media::after {
    background: linear-gradient(
      135deg,
      rgba(249, 180, 171, 0.16),
      rgba(253, 235, 211, 0.06)
    );
  }

  .team-card--variant-secondary .team-card__media::after {
    background: linear-gradient(
      135deg,
      rgba(103, 145, 134, 0.16),
      rgba(187, 212, 206, 0.06)
    );
  }

  .team-card--variant-accent .team-card__media::after {
    background: linear-gradient(
      135deg,
      rgba(38, 78, 112, 0.16),
      rgba(187, 212, 206, 0.06)
    );
  }

  /* Asegurar que el contenido del team-card__body esté por encima del overlay */
  .team-card__body {
    position: relative;
    z-index: 2;
  }
}
