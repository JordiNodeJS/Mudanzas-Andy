---
interface Props {
  phone: string;
  message?: string;
  text: string;
  variant?: "primary" | "secondary";
  size?: "sm" | "md" | "lg";
  fullWidth?: boolean;
}

const {
  phone,
  message = "Hola, me gustarÃ­a solicitar un presupuesto gratuito para mi mudanza",
  text,
  variant = "primary",
  size = "md",
  fullWidth = false,
} = Astro.props satisfies Props;

import { buttonClasses, formatPhoneForWhatsApp } from "../../lib/ui.ts";

const classes = buttonClasses({ variant, size, fullWidth });
const formattedPhone = formatPhoneForWhatsApp(phone);
const whatsappUrl = `https://wa.me/${formattedPhone}?text=${encodeURIComponent(message)}`;
---

<a
  href={whatsappUrl}
  target="_blank"
  rel="noopener noreferrer"
  class={classes}
  aria-label={`Enviar WhatsApp al ${phone}`}
>
  <span class="text-lg lg:text-xl">ðŸ’¬</span>
  <span class="break-words hyphens-auto">{text}</span>
</a>
